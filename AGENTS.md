# AGENTS

Follows AGENT_BLUEPRINT.md

## Project Overview

A static blog generator using Clojure/Hiccup, and Tailwind CSS (standalone binary). It uses Pandoc for Markdown conversion and a `just` task runner. The site is hosted on Digital Ocean App Platform.

**Tech Stack:**
- **Language:** Clojure 1.10+
- **Templates:** Hiccup
- **Markdown:** Pandoc pipeline
- **Styling:** Tailwind CSS (standalone CLI)
- **E2E/Visual:** Playwright (TypeScript) in `e2e/` folder
- **Task Runner:** `just`
- **Hosting:** Digital Ocean App Platform serves `static/`

## Validation Commands

| Level | Command | When |
|-------|---------|------|
| 1 | `(none)` | (Clojure linting not strictly enforced yet) |
| 2 | `just build` | Regenerates all static site output |
| 3 | `just smoke` | Runs basic Playwright smoke tests |
| 4 | `just flow-nav` | Runs navigation flow and captures screenshots |

## Allowed Commands

- `just build` — Regenerates all static site output.
- `just smoke` — Runs basic Playwright smoke tests.
- `just flow-nav` — Runs navigation flow and captures screenshots.
- `just screenshot <path>` — Captures a screenshot of a specific route.

## Require Confirmation

- `just dev` — Starts server and tailwind watcher (concurrent).
- `just server` — Starts the dev server (port 8081).
- `just watch-css` — Starts Tailwind in watch mode.
- Any command that modifies `posts/` or `pages/` content.

## Never Run

- `tailwindcss ... --watch` — Automatically (use `just watch-css` with confirmation).
- `org-blog.dev-server/start-server` — Automatically.

## Project-Specific Rules

- **Workflow:** Perform a single logical task, then stop and ask for validation/feedback. Do not chain multiple feature implementations.
- **Validation:** Always reflect on the current state and plan before executing.
- **Generated Files:** `static/` is generated output. `static/css/output.css` is generated by Tailwind. Regenerate only when needed.
- **Series Guidance:** Follow `content-spec.md` for series purpose, tone, title formats, tags, and filename rules.
- **Legacy:** Do not use `validate-env.sh` or `dev/codex_init.clj`.

## Key Files

- `src/org_blog/core.clj` — Main entry point.
- `Justfile` — Task definitions.
- `deps.edn` — Clojure dependencies.
- `roadmap/index.md` — Project roadmap.